---
id: full_library_scan
name: Full Library Scan
description: Scans all media folders for new movies, and updates all metadata.
nodes:
- id: media_folder_loop
  name: Media Folder Loop
  start: true
  type: loop
  args:
    loop_source_rel: "${MediaFolder.enabled}"
    loop_iteration: "${media_folder_loop.iteration}"
  next:
    loop: ls_movies
    done: workflow_complete
  editor:
    x: -125.0
    "y": -125.0
- id: ls_movies
  name: Find All Movie Files
  type: file_system
  args:
    operation: glob
    path: "${media_folder_loop.item.path}"
    pattern: Movies*/**/*.{mkv,mp4,avi,mov,m4v,wmv,flv,webm}
  next:
    default: movies
  editor:
    x: -350.0
    "y": 125.0
- id: movies
  name: Import Movies
  type: fork
  args:
    workflow_id: import_movie
    items: "${ls_movies}"
  next:
    join: ls_tv_shows
  editor:
    x: -350.0
    "y": 325.0
- id: ls_tv_shows
  name: Find All TV Episode Files
  type: file_system
  args:
    operation: glob
    path: "${media_folder_loop.item.path}"
    pattern: TV*/**/*.{mkv,mp4,avi,mov,m4v,wmv,flv,webm}
  next:
    default: tv_episodes
  editor:
    x: -350.0
    "y": 550.0
- id: tv_episodes
  name: Import TV Episodes
  type: fork
  args:
    workflow_id: import_tv_episode
    items: "${ls_tv_shows}"
  next:
    join: media_folder_loop
    editor:
      x: -275.0
      "y": 825.0
  editor:
    x: -350.0
    "y": 750.0
- id: workflow_complete
  name: Workflow Complete
  end: true
  type: noop
  editor:
    x: 100.0
    "y": 125.0
  next:
    default:
